"use client";

import { HTMLAttributes, useMemo } from "react";
import styles from "@/_component/keypad/keypad.css";
import Key from "@/_component/keypad/Key";
import Back from "@icon/Icon_Back_Gray.svg";
import Cancel from "@icon/Icon_Cancellation_Gray.svg";

type Props = {
  len: number;
  password: string[];
  keypads: string[];
} & HTMLAttributes<HTMLButtonElement>;

export default function KeyPad({ len, password, onClick, keypads }: Props) {
  const result = [
    '<svg width="19" height="28" viewBox="0 0 19 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.710938 20.1621C0.710938 18.498 1.17383 17.1152 2.09961 16.0137C3.02539 14.9121 4.06836 14.1738 5.22852 13.7988V13.7285C4.16211 13.2715 3.27148 12.5508 2.55664 11.5664C1.8418 10.5703 1.48438 9.32812 1.48438 7.83984C1.48438 5.76562 2.20508 4.10156 3.64648 2.84766C5.08789 1.59375 7.02148 0.966797 9.44727 0.966797C11.8848 0.966797 13.8184 1.60547 15.248 2.88281C16.6895 4.14844 17.4102 5.80078 17.4102 7.83984C17.4102 9.36328 17.0527 10.6172 16.3379 11.6016C15.623 12.5859 14.7383 13.2949 13.6836 13.7285V13.7988C14.8789 14.1504 15.9277 14.8828 16.8301 15.9961C17.7324 17.0977 18.1836 18.4863 18.1836 20.1621C18.1836 22.459 17.3691 24.2461 15.7402 25.5234C14.123 26.8008 12.0254 27.4395 9.44727 27.4395C6.88086 27.4395 4.7832 26.8008 3.1543 25.5234C1.52539 24.2461 0.710938 22.459 0.710938 20.1621ZM5.49219 19.7402C5.49219 21.1113 5.83789 22.166 6.5293 22.9043C7.23242 23.6426 8.20508 24.0117 9.44727 24.0117C10.6895 24.0117 11.6562 23.6426 12.3477 22.9043C13.0391 22.1543 13.3848 21.0996 13.3848 19.7402C13.3848 18.334 13.0273 17.2676 12.3125 16.541C11.6094 15.8145 10.6543 15.4512 9.44727 15.4512C8.24023 15.4512 7.2793 15.8145 6.56445 16.541C5.84961 17.2676 5.49219 18.334 5.49219 19.7402ZM6.07227 8.33203C6.07227 9.5625 6.37695 10.5469 6.98633 11.2852C7.5957 12.0234 8.41602 12.3926 9.44727 12.3926C10.4785 12.3926 11.293 12.0234 11.8906 11.2852C12.5 10.5469 12.8047 9.5625 12.8047 8.33203C12.8047 7.11328 12.5176 6.1582 11.9434 5.4668C11.3691 4.77539 10.5371 4.42969 9.44727 4.42969C8.35742 4.42969 7.51953 4.76953 6.93359 5.44922C6.35938 6.11719 6.07227 7.07813 6.07227 8.33203Z" fill="#717171"/>\n</svg>\n',
    '<svg width="19" height="28" viewBox="0 0 19 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.640625 9.68555C0.640625 7.03711 1.4375 4.92188 3.03125 3.33984C4.625 1.75781 6.71094 0.966797 9.28906 0.966797C11.9375 0.966797 14.0879 1.8457 15.7402 3.60352C17.4043 5.34961 18.2363 8.17383 18.2363 12.0762V12.9023C18.2363 17.25 17.0293 20.7129 14.6152 23.291C12.2012 25.8574 8.76758 27.1523 4.31445 27.1758H3.52344V23.4141H4.22656C7.17969 23.4141 9.48242 22.5586 11.1348 20.8477C12.7871 19.1367 13.6133 16.3477 13.6133 12.4805L13.5254 11.8301C13.5254 9.08789 13.1387 7.17773 12.3652 6.09961C11.6035 5.02148 10.5664 4.48242 9.25391 4.48242C8.03516 4.48242 7.0918 4.89844 6.42383 5.73047C5.75586 6.55078 5.42188 7.88086 5.42188 9.7207C5.42188 11.373 5.74414 12.6152 6.38867 13.4473C7.04492 14.2793 8.01172 14.6953 9.28906 14.6953C10.4727 14.6953 11.4805 14.2734 12.3125 13.4297C13.1445 12.5859 13.5605 11.4434 13.5605 10.002H14.8086C14.8086 12.3105 14.1758 14.2031 12.9102 15.6797C11.6445 17.1562 9.96875 17.8945 7.88281 17.8945C5.65625 17.8945 3.89258 17.1621 2.5918 15.6973C1.29102 14.2324 0.640625 12.2285 0.640625 9.68555Z" fill="#717171"/>\n</svg>\n',
    '<svg width="18" height="26" viewBox="0 0 18 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3.96289 26L12.8398 4.27344H0.552734V0.40625H17.7793V3.62305L8.95508 26H3.96289Z" fill="#717171"/>\n</svg>\n',
    '<svg width="17" height="28" viewBox="0 0 17 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.0976562 18.4922V9.91406C0.0976562 7.13672 0.830078 4.95117 2.29492 3.35742C3.75977 1.76367 5.82227 0.966797 8.48242 0.966797C11.1309 0.966797 13.1934 1.75781 14.6699 3.33984C16.1582 4.92188 16.9023 7.11328 16.9023 9.91406V18.4922C16.9023 21.3164 16.1465 23.5195 14.6348 25.1016C13.123 26.6719 11.0723 27.4512 8.48242 27.4395C5.81055 27.4277 3.74219 26.6367 2.27734 25.0664C0.824219 23.4961 0.0976562 21.3047 0.0976562 18.4922ZM4.89648 19.1426C4.89648 20.6191 5.18359 21.7852 5.75781 22.6406C6.34375 23.4961 7.25195 23.9238 8.48242 23.9238C9.71289 23.9238 10.6211 23.4961 11.207 22.6406C11.8047 21.7852 12.1035 20.6191 12.1035 19.1426V9.31641C12.1035 7.82812 11.8047 6.65625 11.207 5.80078C10.6211 4.94531 9.71289 4.51758 8.48242 4.51758C7.26367 4.51758 6.36133 4.94531 5.77539 5.80078C5.18945 6.65625 4.89648 7.82812 4.89648 9.31641V19.1426Z" fill="#717171"/>\n</svg>\n',
    '<svg width="19" height="27" viewBox="0 0 19 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.675781 19.127V18.5469L5.38672 18.5645V19.0566C5.38672 20.334 5.73242 21.3008 6.42383 21.957C7.12695 22.6133 8.09961 22.9414 9.3418 22.9414C10.6074 22.9414 11.5977 22.5195 12.3125 21.6758C13.0273 20.8203 13.3848 19.4961 13.3848 17.7031C13.3848 15.9219 13.0273 14.6504 12.3125 13.8887C11.5977 13.1152 10.6602 12.7285 9.5 12.7285C8.60938 12.7285 7.83008 12.9102 7.16211 13.2734C6.49414 13.6367 5.94336 14.1113 5.50977 14.6973L1.48438 13.4668L2.80273 0.40625H16.8652V4.23828L6.49414 4.18555L5.82617 10.7246C6.37695 10.3145 7.05664 9.97461 7.86523 9.70508C8.68555 9.42383 9.57617 9.2832 10.5371 9.2832C12.6699 9.2832 14.4688 9.97461 15.9336 11.3574C17.4102 12.7402 18.1484 14.7969 18.1484 17.5273C18.1484 20.3164 17.3633 22.502 15.793 24.084C14.2344 25.6543 12.0957 26.4395 9.37695 26.4395C6.66992 26.4395 4.54297 25.7832 2.99609 24.4707C1.44922 23.1465 0.675781 21.3652 0.675781 19.127Z" fill="#717171"/>\n</svg>\n',
    '<svg width="12" height="26" viewBox="0 0 12 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.44531 26V4.83594L0.0292969 7.15625V3.13086L8.41406 0.142578H11.209V26H6.44531Z" fill="#717171"/>\n</svg>\n',
    '<svg width="19" height="26" viewBox="0 0 19 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.0996 26V19.2324L11.1875 18.6523V6.94531H11.0117L4.87695 16.7891H12.5938L13.4727 16.7188H18.6582V20.4453H0.21875V17.1406L11.416 0.40625H15.5996V26H11.0996Z" fill="#717171"/>\n</svg>\n',
    '<svg width="19" height="27" viewBox="0 0 19 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.957031 27V23.9766L9.81641 14.0801C10.7305 13.0137 11.4746 12.0059 12.0488 11.0566C12.6348 10.0957 12.9277 9.10547 12.9277 8.08594C12.9277 6.94922 12.6113 6.07031 11.9785 5.44922C11.3574 4.82813 10.5137 4.51758 9.44727 4.51758C8.35742 4.51758 7.46094 4.86914 6.75781 5.57227C6.05469 6.26367 5.70312 7.41797 5.70312 9.03516V9.52734H0.921875V8.71875C0.921875 6.41016 1.71289 4.54102 3.29492 3.11133C4.88867 1.68164 6.95117 0.966797 9.48242 0.966797C12.1074 0.966797 14.1348 1.61133 15.5645 2.90039C16.9941 4.17773 17.709 5.83008 17.709 7.85742C17.709 9.48633 17.3105 10.9453 16.5137 12.2344C15.7285 13.5234 14.6914 14.8887 13.4023 16.3301L7.47852 23.168H18.3066V27H0.957031Z" fill="#717171"/>\n</svg>\n',
    '<svg width="19" height="28" viewBox="0 0 19 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.570312 20.0039V19.3711H5.24609V19.916C5.24609 21.2402 5.61523 22.2422 6.35352 22.9219C7.0918 23.6016 8.06445 23.9414 9.27148 23.9414C10.5137 23.9414 11.4922 23.6016 12.207 22.9219C12.9219 22.2305 13.2793 21.1348 13.2793 19.6348C13.2793 18.1699 12.8691 17.0859 12.0488 16.3828C11.2285 15.668 10.1152 15.3105 8.70898 15.3105H6.23047V12.1289H8.56836C9.78711 12.1289 10.7539 11.8008 11.4688 11.1445C12.1836 10.4883 12.541 9.48047 12.541 8.12109C12.541 6.87891 12.248 5.96484 11.6621 5.37891C11.0762 4.78125 10.2559 4.48242 9.20117 4.48242C8.07617 4.48242 7.21484 4.79883 6.61719 5.43164C6.03125 6.06445 5.73828 6.97266 5.73828 8.15625V8.57812H1.11523V8.10352C1.11523 5.95898 1.87109 4.23633 3.38281 2.93555C4.89453 1.62305 6.86914 0.966797 9.30664 0.966797C11.791 0.966797 13.7422 1.58203 15.1602 2.8125C16.5781 4.03125 17.2871 5.625 17.2871 7.59375C17.2871 9.03516 16.9648 10.2598 16.3203 11.2676C15.6875 12.2754 14.7441 13.0312 13.4902 13.5352V13.6055C14.8027 13.9219 15.8926 14.6133 16.7598 15.6797C17.6387 16.7461 18.0781 18.1348 18.0781 19.8457C18.0781 22.1426 17.2754 23.9824 15.6699 25.3652C14.0762 26.748 11.9316 27.4395 9.23633 27.4395C6.54102 27.4395 4.41992 26.7656 2.87305 25.418C1.33789 24.0703 0.570312 22.2656 0.570312 20.0039Z" fill="#717171"/>\n</svg>\n',
    '<svg width="19" height="27" viewBox="0 0 19 27" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M0.816406 15.3477V14.5039C0.816406 10.0508 2.01758 6.5293 4.41992 3.93945C6.83398 1.34961 10.2734 0.0546875 14.7383 0.0546875H15.5117V3.85156H14.8086C11.8555 3.85156 9.54688 4.71289 7.88281 6.43555C6.23047 8.14648 5.4043 10.9883 5.4043 14.9609L5.50977 15.5762C5.50977 18.3887 5.90234 20.3223 6.6875 21.377C7.47266 22.4316 8.49805 22.959 9.76367 22.959C10.9941 22.959 11.9434 22.543 12.6113 21.7109C13.291 20.8672 13.6309 19.5078 13.6309 17.6328C13.6309 16.0039 13.3027 14.7617 12.6465 13.9062C11.9902 13.0391 11.0234 12.6055 9.74609 12.6055C8.5625 12.6055 7.55469 13.0391 6.72266 13.9062C5.90234 14.7734 5.49219 15.9336 5.49219 17.3867H4.17383C4.17383 14.9961 4.82422 13.0684 6.125 11.6035C7.42578 10.1387 9.10156 9.40625 11.1523 9.40625C13.3906 9.40625 15.1543 10.1445 16.4434 11.6211C17.7441 13.0977 18.3945 15.1133 18.3945 17.668C18.3945 20.3281 17.5977 22.4551 16.0039 24.0488C14.4102 25.6426 12.3242 26.4395 9.74609 26.4395C7.10938 26.4395 4.95898 25.5664 3.29492 23.8203C1.64258 22.0625 0.816406 19.2383 0.816406 15.3477Z" fill="#717171"/>\n</svg>\n',
  ];
  console.log(keypads);
  const keys = useMemo(
    () => [
      ...result.slice(0, result.length - 1),
      <Cancel />,
      result.at(-1),
      <Back />,
    ],
    [],
  );

  return (
    <>
      <div className={styles.passwordContainer}>
        {new Array(len).fill(0).map((_, idx) => (
          <div
            key={idx}
            className={
              password[idx] ? styles.selectPassword : styles.unSelectPassword
            }
          />
        ))}
      </div>

      <div className={styles.container}>
        {keys.map((item, idx) => (
          <Key key={idx} value={idx} onClick={onClick}>
            {idx === 9 || idx === 11 ? (
              item
            ) : (
              <div dangerouslySetInnerHTML={{ __html: item as string }} />
            )}
          </Key>
        ))}
      </div>
    </>
  );
}
